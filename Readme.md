# 完整的Python + Pyomo实现，展示如何用Big-M方法处理飞机分离约束

代码使用说明
1. 安装依赖
bash# 安装Pyomo
pip install pyomo

# 安装免费的GLPK求解器
conda install -c conda-forge glpk

# 或者安装商业求解器（性能更好）
# pip install cplex  # 需要IBM许可证
# pip install gurobipy  # 需要Gurobi许可证
2. 代码特点
核心建模技巧：

✅ Big-M方法：将 |RTA_i - RTA_j| ≥ 120 转换为线性约束
✅ 二进制变量：B[i,j] 决定飞机到达顺序
✅ 绝对值线性化：用 dev_pos 和 dev_neg 处理目标函数
✅ 自动Big-M计算：基于时间窗自动计算合适的M值

模型规模：

5架飞机 → 25个变量（15连续 + 10二进制）
35个约束（时间窗 + 偏差 + 分离约束）
求解时间：通常几秒内

3. 运行示例
python# 运行完整模型
python aircraft_scheduling_pyomo.py

# 运行分离约束演示
python separation_constraint_demo.py
4. 预期输出
求解成功！找到最优解
目标函数值（总偏差）: 200.00 秒

飞机到达时间安排:
飞机     计划(STA)    实际(RTA)    偏差      时间窗
A        1000         1000.0       +0.0     [900,1200]
B        1100         1120.0       +20.0    [1000,1300]
C        1200         1240.0       +40.0    [1100,1400]
D        1300         1360.0       +60.0    [1200,1500]
E        1400         1480.0       +80.0    [1300,1600]

飞机到达顺序:
1. 飞机A: 1000.0秒
   -> 与下一架飞机间隔: 120.0秒 ✓
2. 飞机B: 1120.0秒
   -> 与下一架飞机间隔: 120.0秒 ✓
...
5. 扩展建议
这个模型可以很容易扩展：

更多飞机：只需修改 aircraft_data 字典
不同分离时间：根据飞机类型设置不同的 t_sep
跑道容量：添加时间段容量约束
优先级权重：给不同飞机设置不同的偏差权重
天气延误：动态调整时间窗

这就是运筹学建模的魅力 - 将复杂的现实问题转化为数学可解的标准形式！ 🛫


# 关键建模要点总结
1. 变量规模分析

5架飞机 → 10个二进制变量 (C(5,2) = 10对飞机)
每对飞机2个分离约束 → 20个分离约束
总变量：25个（15连续 + 10二进制）

2. Big-M值的关键作用
当B_AB = 1时：
- RTA_A + 120 ≤ RTA_B (飞机A必须比B早120秒)
- RTA_B + 120 ≤ RTA_A + M (自动满足，因为M很大)

当B_AB = 0时：
- RTA_A + 120 ≤ RTA_B + M (自动满足)  
- RTA_B + 120 ≤ RTA_A (飞机B必须比A早120秒)
3. 实际求解复杂度

理论上： 2^10 = 1024种二进制变量组合
实际上： 现代MILP求解器通过分支定界、割平面等技术大大减少搜索空间
5架飞机规模： 通常几秒内可得到最优解

4. 扩展到更大规模
如果是n架飞机：

二进制变量：C(n,2) = n(n-1)/2 个
分离约束：n(n-1) 个
复杂度：O(2^(n²/2))，当n>20时需要启发式算法

这个模型完美展示了运筹学中线性化技术的威力 - 将复杂的非线性调度问题转化为标准的MILP问题！